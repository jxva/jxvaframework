package org.jxva.ip;

import java.util.ArrayList;
import java.util.List;

public class Cn {

	int ip10[]={0,16777215};
	int ip58[]={917504,1703936,1966080,4194304,4325376,4456448,5373952,5505024,5718016,5734400,6553600,6684672,7602176,7864320,8388608,8912896,9437184,9502720,12582912,12976128,13107200,14680064,15728640,16777216};
	int ip59[]={2097152,5505024,7012352,7208960,9898936,9928704,12517376,12550144,12582912,16777216};
	int ip60[]={0,868352,884736,2097152,3604480,3670016,4128768,4194304,10485760,12582912,12713984,12845056,13107200,13434880,13631488,14680064,15204352,15335424,16711680,16777216};
	int ip61[]={1835008,1867776,1933312,1966080,2981888,2998272,3112960,3129344,3145728,3670016,8388608,12582912,15204352,15597568,15728640,15990784};
	int ip121[]={262144,393216,524288,1048576,1048576,1572864,1572864,1835008,1835008,1966080,2097152,2359296,2359296,2424832,2621440,2883584,3670016,3801088};
	int ip124[]={409600,425984,1048576,1179648,1310720,1441792,1900544,1933312,2654208,2670592,2752512,2785280,3080192,3096576,4194304,4325376,4718592,5242880,5767168,6291456,7079936,7081984,7340032,7864320,8388608,8912896,9666560,9699328,10223616,10289152,10485760,10682368,11272192,11403264,12582912,12713984,12845056,12910592,13107200,13631488,14417920,14745600,14811136,15335424,15728640,15761408,15859712,15925248,15974400,15990784,16252928,16285696,16318464,16515072,16646144,16662528};
	int ip125[]={2080768,3145728,3833856,3866624,4063232,4079616,4194304,6488064,6815744,8388608,11206656,11272192,13631488,13647872,13762560,13828096,13959168,13991936,14090240,14106624,14155776,14680064,16678912,16695296};
	int ip134[]={12845056,12910592};
	int ip159[]={14811136,14876672};
	int ip161[]={13565952,13631488};
	int ip162[]={6881280,6946816};
	int ip166[]={7274496,7340032};
	int ip167[]={9109504,9175040};
	int ip168[]={10485760,10551296};
	int ip172[]={1048576,2097152};
	int ip192[]={5470720,5470976,5482752,5483008,8165888,8166144,11010048,11075583,12364288,12364544};
	int ip198[]={1115904,1116160};
	int ip202[]={28160,28416,40960,46080,294912,303104,326656,327680,557056,565248,671744,675840,940072,940288,977664,978688,1341440,1341696,1505280,1506304,1506304,1507328,1835008,1839104,1851392,1870592,1870848,1871872,1872384,1872896,1873152,1876480,1876992,1880576,1882112,1900544,2725888,2727936,2748416,2752512,3022848,3031040,3072000,3076096,3960832,3964928,4192256,4193280,4523008,4524032,4526080,4530176,4587520,4595712,4851712,4853760,4968448,4972544,5623808,5627904,5898240,5899264,5955584,5959680,5962752,5964800,5996544,5997568,6008832,6012928,6029312,6030336,6093824,6095872,6159360,6168576,6225920,6234112,6290432,7997440,8003584,8005632,8011776,8019968,8024064,8026112,8028160,8028416,8085495,8089591,8237056,8241152,8323072,8325120,8326144,8331264,8333312,8339456,8351744,8366080,8372224,8376832,8377344,8388608,8519680,8527872,8577024,8585216,8589312,8591360,8597504,8601600,8638464,8642560,8970240,8974336,8977408,8978432,9281536,9289728,9310208,9314304,9375744,9379840,9723904,9732096,9805824,9814016,9822208,9830400,9834496,9838592,10458528,10162624,10039296,10043392,10395648,10403840,10530816,10534912,10747904,10752000,10838016,10842112,10866688,10870784,11051008,11055104,11055104,11059200,11173888,11182080,11366416,11368464,11339776,11341824,11395072,11403264,11792384,11796480,11829248,11862016,11890688,11894784,12255232,12259328,12406784,12410880,12582912,13631488};
	int ip203[]={5177344,5181440,5279744,5283840,5312512,5316608,5453824,5455872,5636096,5660672,5775360,5783552,5816320,5824512,5832704,5833728,5898240,5899264,5931008,5955584,5971968,5980160,6291456,6295552,7864320,7866368 ,6029312,6030336,6070272,6078464,6094848,6095872,6095872,6168576,6225920,6227968,6250496,6254592,6492160,6496256,6508544,6512640,6561792,6565888,6578176,6586368,6602752,6606848,7249920,7258112,7782400,7790592,7804928,8404992,8413184,8429568,8527872,8536064,8658988,8667136,8843264,8845312,8871936,8880128,8888320,8892416,9699328,9715712,9977856,9986048,10272768,10289052,10358784,10360832,10600448,10608640,10919936,10928128,11264000,11268096,11427840,11436032,11501568,11509760,11517952,11534336,12079104,12083200,12296192,12304384,12476416,12480512,12521472,12525568,12533760,12550144,12554240,12556288,12582912,12591104,12845056,12847104,12582336,13635584,13635584,13636608,13639680,13647872,13754368,13762560,13893632,13897728,14598144,14602240,14614528,14618624};
	int ip210[]={327680,335872,360448,364544,786432,917504,933888,942088,950272,1032192,1081344,1097728,1376256,1507328,1515520,1523712,1638400,3145728,3342336,3538944,3719168,3727360,4718592,5177344,5193728,5210112,5234688,5242880,5373952,5505024,5743400,5759784,12173312,12189696,12607488,12615680,13828096,13832192};
	int ip211[]={4194304,4718592,5242880,6815744,8912896,11010048};
	int ip218[]={0,2097152,3670016,6553600,6815744,7208960,12173312,12181504,12582912,13631488,15728640,16318464};
	int ip219[]={4718592,4784128,5373952,5439488,8388608,10485760,14155776,15728640,15859712,16252928};
	int ip220[]={6668288,6684672,7340032,7602176,10485760,13631488,15138816,15155200,15171584,15204352,15220736,15237120,15335424,15400960,16252928,16580608};
	int ip221[]={0,835584,851968,1048576,7995392,8126464,8454144,8650752,8912896,9043968,11272192,12058624,12582912,13074432,13107200,15728640};
	int ip222[]={1048576,6291456,8192000,8257536,8388608,9437184,10485760,10747904,11010048,16384000};

	int ipAddress[][]={ip10,ip58,ip59,ip60,ip61,ip121,ip124,ip125,ip134,ip159,ip161,ip162,ip166,ip167,ip168,ip172,ip192,ip198,ip202,ip203,ip210,ip211,ip218,ip219,ip220,ip221,ip222};

	int ipNumber[]={1,12,5,10,8,9,28,12,1,1,1,1,1,1,1,1,5,1,85,58,19,3,6,5,8,8,5};
	
	boolean isCnip(String ip){
		int ipheader[]={10,58,59,60,61,121,124,125,134,159,161,162,166,167,168,172,192,198,202,203,210,211,218,219,220,221,222};
		String[] s=ip.split("\\.");
		int abc[]={Integer.valueOf(s[0]),Integer.valueOf(s[1]),Integer.valueOf(s[2]),Integer.valueOf(s[3])};

		
		for(int k=0;k<27;k++){
			if(abc[0]==ipheader[k]){
				int sum=abc[1]*65536+abc[2]*256+abc[3];
				for(int l=0;l<ipNumber[k];l++){
					if(sum>=ipAddress[k][l*2]&&sum<=ipAddress[k][l*2+1]){
						return true;
					}
				}
			}
		}
		return false;
//		char buff[256];
//		int k,l;
//		for(k=0;k<27;k++){
//			if(abc[0]==ipheader[k]){
//				sum=abc[1]*65536+abc[2]*256+abc[3];
//				for(l=0;l<ipNumber[k];l++){
//					//sprintf(buff,"%d,%d,%d,%d-%d",k,l,sum,ipAddress[k][l*2],ipAddress[k][l*2+1]);
//					//MessageBox(NULL,buff,buff,MB_OK);
//					if(sum>=ipAddress[k][l*2]&&sum<=ipAddress[k][l*2+1]){
//						yesCN=1;
//						l=100;k=28;
//					}
//				}
//			}
//		}
	}

//	int isCnip(String s){
//		int abc[4],ipheader[]={10,58,59,60,61,121,124,125,134,159,161,162,166,167,168,172,192,198,202,203,210,211,218,219,220,221,222};
//		char tempStr[3]={'\0'};
//		int i=0,j;
//		while(text[i]!='.'){
//			tempStr[i]=text[i];
//			i++;
//		}
//		abc[0]=atoi(tempStr);
//		j=0;i++;
//		tempStr[2]='\0';
//		while(text[i]!='.'){
//			tempStr[j]=text[i];
//			i++,j++;
//		}
//		abc[1]=atoi(tempStr);
//		j=0;i++;
//		tempStr[2]='\0';
//		while(text[i]!='.'){
//			tempStr[j]=text[i];
//			i++,j++;
//		}
//		abc[2]=atoi(tempStr);
//		j=0;i++;
//		tempStr[2]='\0';
//		while(text[i]!='.'&&strlen(text)>i){
//			tempStr[j]=text[i];
//			i++,j++;
//		}
//			abc[3]=atoi(tempStr);
//
//
//
//			int yesCN=0;
//			int  sum=0;
//
//			char buff[256];
//			int k,l;
//			for(k=0;k<27;k++){
//				if(abc[0]==ipheader[k]){
//					sum=abc[1]*65536+abc[2]*256+abc[3];
//					for(l=0;l<ipNumber[k];l++){
//						//sprintf(buff,"%d,%d,%d,%d-%d",k,l,sum,ipAddress[k][l*2],ipAddress[k][l*2+1]);
//						//MessageBox(NULL,buff,buff,MB_OK);
//						if(sum>=ipAddress[k][l*2]&&sum<=ipAddress[k][l*2+1]){
//							yesCN=1;
//							l=100;k=28;
//						}
//					}
//				}
//			}
//		return yesCN;
//	}
	
	public static void main(String[] args) {
		Cn cn=new Cn();
		List<String> ips=new ArrayList<String>();
		ips.add("202.103.190.98");
		ips.add("65.60.49.202");
		ips.add("58.60.0.73");
		for(String ip:ips){
			System.out.println(cn.isCnip(ip));
		}
	}

}
